{% extends 'base.html' %}

{% block title %}
    Registration Portal
{% endblock %}

{% block content %}

<div id="input-container" class="p-6 bg-white rounded-lg shadow-md space-y-4" style="width: 30%; margin: 0 auto;">
    <!-- First Input -->
    <label for="first-input" class="block text-sm font-medium text-gray-700">Choose your nationality:</label>
    <select id="first-input" class="block w-full mt-1 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" onchange="checkSelections()">
        <option value="" selected disabled>Select First...</option>
        <option value="0">Indian</option>
        <option value="1">Foreign</option>
    </select>

    <!-- Second Input -->
    <label for="second-input" class="block text-sm font-medium text-gray-700">Are you an IEEE-Member?</label>
    <select id="second-input" class="block w-full mt-1 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" onchange="checkSelections()">
        <option value="" selected disabled>Select Second...</option>
        <option value="0">IEEE Member</option>
        <option value="1">Non-IEEE Member</option>
    </select>

    <!-- Third Input -->
    <label for="third-input" class="block text-sm font-medium text-gray-700">Are you an author or an attendee?</label>
    <select id="third-input" class="block w-full mt-1 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" onchange="checkSelections()">
        <option value="" selected disabled>Select Third...</option>
        <option value="0">Author</option>
        <option value="1">Attendee</option>
    </select>
</div>

<div id="notification-container" class="mb-4"></div>

<div class="mt-6" id="iframe-container" style="display: none;">
    <div class="relative" style="padding-bottom: 56.25%; height: 0; overflow: hidden;">
        <iframe id="dynamic-iframe" src="" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0;"></iframe>
    </div>
</div>

    <script>
const links = [
    "https://www.yepdesk.com/buy-tickets/66d0aff2c9e77c00019eff26/private/44sgv5dh0r/category/1724958244", // Link 1
    "https://www.yepdesk.com/buy-tickets/66c4a47bc9e77c0001602f0b/private/n2tejimf0h/category/1724871084", // Link 2
    "https://www.yepdesk.com/buy-tickets/66d0aff2c9e77c00019eff26/private/44sgv5dh0r/category/1724958357", // Link 3
    "https://www.yepdesk.com/buy-tickets/66c4a47bc9e77c0001602f0b/private/n2tejimf0h/category/1724871274", // Link 4
    "https://www.yepdesk.com/buy-tickets/66d0aff2c9e77c00019eff26/private/44sgv5dh0r/category/1724958396", // Link 5
    "https://www.yepdesk.com/buy-tickets/66c4a47bc9e77c0001602f0b/private/n2tejimf0h/category/1724871387", // Link 6
    "https://www.yepdesk.com/buy-tickets/66d0aff2c9e77c00019eff26/private/44sgv5dh0r/category/1724958420", // Link 7
    "https://www.yepdesk.com/buy-tickets/66c4a47bc9e77c0001602f0b/private/n2tejimf0h/category/1724871421"  // Link 8
];

// logic for checking the user inputs
function checkSelections() {
    const firstInput = parseInt(document.getElementById('first-input').value); // A
    const secondInput = parseInt(document.getElementById('second-input').value); // B
    const thirdInput = parseInt(document.getElementById('third-input').value); // C

    const iframeContainer = document.getElementById('iframe-container');
    const dynamicIframe = document.getElementById('dynamic-iframe');
    const notificationContainer = document.getElementById('notification-container');

            // Check if the first input is 1 and show the notification
            if (firstInput === 1) {
                notificationContainer.innerHTML = `
                    <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4" role="alert">
                        <p class="font-bold">Notice</p>
                        <p>Please select USD as your currency.</p>
                    </div>`;
            } else {
                notificationContainer.innerHTML = ''; // Clear the notification if the first input is not 1
            }

    // console.log('Selections:', firstInput, secondInput, thirdInput);
    // Check if all inputs are selected
    if (!isNaN(firstInput) && !isNaN(secondInput) && !isNaN(thirdInput)) {
        // Calculate the numerical equivalent
        const value = (firstInput * 4) + (secondInput * 2) + (thirdInput * 1);
        // console.log(value);
        // Show the iframe based on the calculated value
        if (value >= 0 && value < links.length) {
            dynamicIframe.src = links[value]; // Set the iframe source
            iframeContainer.style.display = 'block'; // Show the iframe container
        } else {
            iframeContainer.style.display = 'none'; // Hide if index is out of bounds
        }
    } else {
        iframeContainer.style.display = 'none'; // Hide if not all selections are made
    }
}
    </script>
{% endblock %}


